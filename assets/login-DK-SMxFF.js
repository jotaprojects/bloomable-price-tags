import{w as l}from"./with-props-BqHJ6sHq.js";import{p as n,w as c,x as m,l as e,v as d}from"./chunk-K6AXKMTT-D-gZlIiW.js";import{l as u}from"./supa-auth-CMcUt-ng.js";import{s as g}from"./supabase-B-vAj6jb.js";async function p(){const{data:r,error:s}=await g.auth.getSession();return s?(console.error(s),!1):!!r.session}function b(){return[{title:"Log In"},{name:"description",content:"Log in to Bloomable Price tags."}]}function f(){const{state:r}=c(),s=m(),t=r==="submitting";return e.jsxs(e.Fragment,{children:[e.jsx("h1",{children:"Log In"}),e.jsxs("div",{className:"box",children:[s&&e.jsx("p",{className:"error",children:s}),e.jsxs(d,{method:"post",id:"login-form",className:"form",children:[e.jsxs("div",{className:"form__group",children:[e.jsx("label",{htmlFor:"email",children:"Email"}),e.jsx("input",{type:"email",id:"email",name:"email",required:!0})]}),e.jsxs("div",{className:"form__group",children:[e.jsx("label",{htmlFor:"password",children:"Password"}),e.jsx("input",{type:"password",id:"password",name:"password",required:!0})]}),e.jsx("button",{type:"submit",disabled:t,children:t?"Logging In...":"Log In"})]})]})]})}async function y(){return await p()?n("/"):null}async function L({request:r}){const s=await r.formData(),t=s.get("email"),i=s.get("password"),o={};if((typeof t!="string"||t.length===0)&&(o.email="Email is required."),(typeof i!="string"||i.length===0)&&(o.password="Password is required."),Object.keys(o).length>0)return"Failed to log in. Please check your details.";try{return await u(t,i),n("/")}catch(a){return{message:a.message}}}const I=l(f);export{L as clientAction,y as clientLoader,I as default,b as meta};
